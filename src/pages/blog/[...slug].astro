---
import { type CollectionEntry, getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: post,
	}));
}

type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const { Content } = await post.render();
---

<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>{post.data.title}</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}
			
			body {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
				line-height: 1.8;
				color: #333;
				background: #f5f5f5;
			}
			
			main {
				max-width: 800px;
				margin: 2rem auto;
				padding: 2rem;
				background: white;
				border-radius: 8px;
				box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			}
			
			h1 {
				font-size: 2rem;
				margin-bottom: 1rem;
				color: #1a202c;
			}
			
			article {
				margin-top: 2rem;
			}
			
			article :global(h2) {
				margin-top: 2rem;
				margin-bottom: 1rem;
				font-size: 1.5rem;
			}
			
			article :global(p) {
				margin-bottom: 1rem;
			}
			
			article :global(code) {
				background: #f4f4f4;
				padding: 0.2rem 0.4rem;
				border-radius: 3px;
			}
			
			.back-link {
				margin-top: 2rem;
				display: inline-block;
				color: #667eea;
				text-decoration: none;
			}
			
			.back-link:hover {
				text-decoration: underline;
			}
		</style>
	</head>
	<body>
		<main>
			<h1>{post.data.title}</h1>
			<p style="color: #666; margin-bottom: 2rem;">
				<FormattedDate date={post.data.pubDate} />
			</p>
			<article>
				<Content />
			</article>
			<a href="/" class="back-link">← 記事一覧に戻る</a>
		</main>
	</body>
</html>