---
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Tech Blog</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        background: #f5f5f5;
      }
      
      header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 3rem 2rem;
        text-align: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }
      
      header p {
        font-size: 1.1rem;
        opacity: 0.9;
      }
      
      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 3rem 2rem;
      }
      
      .posts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 2rem;
        list-style: none;
      }
      
      .post-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .post-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      }
      
      .post-card a {
        text-decoration: none;
        color: inherit;
        display: block;
      }
      
      .post-content {
        padding: 1.5rem;
      }
      
      .post-card h2 {
        font-size: 1.5rem;
        margin-bottom: 0.75rem;
        color: #1a202c;
        line-height: 1.3;
      }
      
      .post-date {
        display: inline-block;
        font-size: 0.875rem;
        color: #667eea;
        font-weight: 600;
        margin-bottom: 0.75rem;
        padding: 0.25rem 0.75rem;
        background: #f0f4ff;
        border-radius: 4px;
      }
      
      .post-description {
        color: #666;
        font-size: 0.95rem;
        line-height: 1.6;
        margin-top: 0.75rem;
      }
      
      .post-card:hover h2 {
        color: #667eea;
      }
      
      @media (max-width: 768px) {
        header h1 {
          font-size: 2rem;
        }
        
        .posts-grid {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }
        
        main {
          padding: 2rem 1rem;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Tech Blog</h1>
      <p>技術・開発に関する記事を発信しています</p>
    </header>
    
    <main>
      <ul class="posts-grid">
        {posts.map((post) => (
          <li class="post-card">
            <a href={`/blog/${post.id}/`}>
              <div class="post-content">
                <div class="post-date">
                  <FormattedDate date={post.data.pubDate} />
                </div>
                <h2>{post.data.title}</h2>
                <p class="post-description">{post.data.description}</p>
              </div>
            </a>
          </li>
        ))}
      </ul>
    </main>
  </body>
</html>